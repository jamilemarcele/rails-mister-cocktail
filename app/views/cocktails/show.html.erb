<%= render 'components/navbar-show' %>

<div class="cocktail-banner" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('<%= cl_image_path @cocktail.photo.key unless @cocktail.photo.blank? %>')">
  <h1><%= @cocktail.name %></h1>
</div>

<div class="cocktail-container">
  <div class="row ">
    <div class="text-left col-12 col-lg-8 mt-4">
        <h3>Recipe</h3>
      <ul>
        <% @cocktail.doses.each do |dose|%>
          <li>
            <%= dose.description %>
            <%= dose.ingredient.name %>
            <%= link_to dose_path(dose), method: :delete, data: {confirm: "Are you sure?"} do %>
              <i class="far fa-trash-alt"></i>
            <% end %>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="col-12 col-lg-4 mt-4 mb-4">
      <h4 class="text-left">Add an ingredient</h4>
      <div class="dose-form">
        <p>
          <%= render 'doses/form' %>
        </p>
      </div>
    </div>

    <div class="text-left col-12 col-lg-8 my-4">
      <h3>Reviews:</h3>

      <% if @cocktail.reviews.empty? %>
        <p class="my-4">There are no reviews for this cocktail yet. Feel free to add one!</p>
      <% end %>

      <%  @cocktail.reviews.each do |review| %>
        <div class="card-review mt-2">
          <p class="p-1"> <%= review.name %> - Rating: <%= ("<i class=\"fas fa-star\"></i>" * review.rating).html_safe %></p>
          <p class="p-1"> <%= review.content %> </p>
        </div>
      <% end %>
      <br>
      <h5 class="mt-4">Add a review</h5>
      <%= render 'reviews/form' %>
    </div>
  </div>

</div>

<hr>
<%#= link_to "Delete Cocktail", cocktail_path(@cocktail), method: :delete, data: {confirm: "Are you sure?"}%>
<%= link_to "All cocktails", root_path, class: "show-link"%>
<%#= link_to "Add dose", new_cocktail_dose_path(@cocktail) %>

<!--TODO: responsiveness of the recipe and add ingredient. ROW not working correctly->-->
<!--TODO: adjust all font sizes and font family ->-->
<!--TODO: add sweet alert JS to delete action ->-->
<!--TODO: adjust size of the reviews forms->-->

